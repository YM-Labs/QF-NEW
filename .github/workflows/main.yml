name: Deploy Gatsby to Azure Storage

on:   
 push:  
   branches:  
     - main

jobs:  
 build:

   runs-on: self-hosted

   strategy:  
     matrix:  
       node-version: [18.x]
   steps:  
   - uses: actions/checkout@v1  
       
   - name: Use Node.js ${{ matrix.node-version }}  
     uses: actions/setup-node@v1  
     with:  
       node-version: ${{ matrix.node-version }}  
   
   - name: Install dependencies  
     run: |  
       npm install --legacy-peer-deps
       npm install -g gatsby-cli 
   - name: Build with Gatsby  
     run: gatsby develop
         
